test "@test2.AutoGenerated::to_json works as expected" {
  let ag : @test2.AutoGenerated = {
    booleanfield: true,
    somearray: [
      { id: 1, name: "John Doe", features: { "age": 49, "height": 175 } },
      { id: "2", name: "John Doe", features: ["2", "3", "4"] },
    ],
    date: "2024-07-24",
  }
  let got = ag.to_json().stringify(escape_slash=false)
  let want =
    #|{"booleanfield":true,"somearray":[{"id":1,"name":"John Doe","features":{"age":49,"height":175}},{"id":"2","name":"John Doe","features":["2","3","4"]}],"date":"2024-07-24"}
  assert_eq!(got, want)
}

test "@json.parse(@test2.AutoGenerated) works as expected" {
  let s =
    #|{"booleanfield":true,"somearray":[{"id":1,"name":"John Doe","features":{"age":49,"height":175}},{"id":"2","name":"John Doe","features":["2","3","4"]}],"date":"2024-07-24"}
  let jv = @json.parse!(s)
  let got : @test2.AutoGenerated = @json.from_json!(jv)
  let want : @test2.AutoGenerated = {
    booleanfield: true,
    somearray: [
      { id: 1, name: "John Doe", features: { "age": 49, "height": 175 } },
      { id: "2", name: "John Doe", features: ["2", "3", "4"] },
    ],
    date: "2024-07-24",
  }
  assert_eq!(got, want)
}
