test "@test3.AutoGenerated::to_json works as expected" {
  let ag : @test3.AutoGenerated = {
    first: { id: 1, type_: { short: "owa", long: "objectwitharray" } },
    second: { id: 2, second_type: { long: "object" } },
  }
  let got = ag.to_json().stringify(escape_slash=false)
  let want =
    #|{"first":{"id":1,"type":{"short":"owa","long":"objectwitharray"}},"second":{"id":2,"type":{"long":"object"}}}
  assert_eq!(got, want)
}

test "@json.parse(@test3.AutoGenerated) works as expected" {
  let s =
    #|{"first":{"id":1,"type":{"short":"owa","long":"objectwitharray"}},"second":{"id":2,"type":{"long":"object"}}}
  let jv = @json.parse!(s)
  let got : @test3.AutoGenerated = @json.from_json!(jv)
  let want : @test3.AutoGenerated = {
    first: { id: 1, type_: { short: "owa", long: "objectwitharray" } },
    second: { id: 2, second_type: { long: "object" } },
  }
  assert_eq!(got, want)
}
